{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\STSC\\\\Downloads\\\\Agent-Backend-main (3)\\\\my-app\\\\src\\\\pages\\\\DirectoryDetail.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport '../styles/DirectoryDetail.css';\nimport logo from '../images/OatmealaLogoi (1).png';\nimport { API_ENDPOINTS } from '../config';\n\n// Import images with the correct file extensions\nimport agriAssociaImg from '../images/agri_associa.png';\nimport artisianImg from '../images/artisian.jpg';\nimport brImg from '../images/br.jpg';\nimport crafOrgImg from '../images/craf_org.jpg';\nimport farmersMarketImg from '../images/farmers_market.jpg';\nimport farmsRanchesImg from '../images/farms_ranches.jpg';\nimport fiberImg from '../images/fiber.jpg';\nimport fiberMillsImg from '../images/fiber_mills.jpg';\nimport fisheriesImg from '../images/fisheries.jpeg';\nimport fishermenImg from '../images/fishermen.jpeg';\nimport foodCopImg from '../images/food_cop.jpg';\nimport foodHubImg from '../images/food_hub.jpg';\nimport groceryStoreImg from '../images/grocery_store.jpeg';\nimport manfacImg from '../images/manfac.jpeg';\nimport marinasImg from '../images/marinas.jpeg';\nimport meatImg from '../images/meat.jpg';\nimport realEstateImg from '../images/real_estate.webp';\nimport restaurantsImg from '../images/restaurants.jpg';\nimport retailersImg from '../images/retailers.png';\nimport serviceProvidersImg from '../images/service_providers.webp';\nimport universitiesImg from '../images/universities.jpeg';\nimport vetImg from '../images/vet.webp';\nimport vineyardsImg from '../images/vineyards.jpeg';\nimport wineriesImg from '../images/wineries.png';\nimport othersImg from '../images/others.jpg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction DirectoryDetail() {\n  _s();\n  const {\n    directoryType\n  } = useParams();\n  const [countries, setCountries] = useState([]);\n  const [states, setStates] = useState([]);\n  const [businesses, setBusinesses] = useState([]);\n  const [selectedCountry, setSelectedCountry] = useState('');\n  const [selectedState, setSelectedState] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Format the directory type for display (convert path slugs to title)\n  const formatTitle = slug => {\n    if (!slug) return '';\n    return slug.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');\n  };\n  const title = formatTitle(directoryType);\n\n  // Map of directory type slugs to their corresponding images\n  const directoryImages = {\n    'agricultural-associations': agriAssociaImg,\n    'artisan-producers': artisianImg,\n    'business-resources': brImg,\n    'crafter-organizations': crafOrgImg,\n    'farmers-markets': farmersMarketImg,\n    'farms-ranches': farmsRanchesImg,\n    'fiber-cooperatives': fiberImg,\n    'fiber-mills': fiberMillsImg,\n    'fisheries': fisheriesImg,\n    'fishermen': fishermenImg,\n    'food-cooperatives': foodCopImg,\n    'food-hubs': foodHubImg,\n    'grocery-stores': groceryStoreImg,\n    'manufacturers': manfacImg,\n    'marinas': marinasImg,\n    'meat-wholesalers': meatImg,\n    'real-estate-agents': realEstateImg,\n    'restaurants': restaurantsImg,\n    'retailers': retailersImg,\n    'service-providers': serviceProvidersImg,\n    'universities': universitiesImg,\n    'veterinarians': vetImg,\n    'vineyards': vineyardsImg,\n    'wineries': wineriesImg,\n    'others': othersImg\n  };\n\n  // Get the correct image for the current directory type\n  const getHeaderImage = () => {\n    return directoryImages[directoryType] || othersImg; // Default to \"others\" if not found\n  };\n\n  // Load countries from API\n  useEffect(() => {\n    const loadCountries = async () => {\n      try {\n        setIsLoading(true);\n        setError(null);\n        console.log(\"Fetching countries from:\", API_ENDPOINTS.countries);\n        const response = await fetch(API_ENDPOINTS.countries);\n        if (!response.ok) {\n          const errorData = await response.text();\n          console.error(\"Countries API error:\", errorData);\n          throw new Error(`Failed to fetch countries: ${response.status} ${response.statusText}`);\n        }\n        const data = await response.json();\n        console.log(\"Countries data:\", data);\n        if (Array.isArray(data) && data.length > 0) {\n          setCountries(data);\n        } else {\n          console.warn(\"Empty or invalid countries data:\", data);\n          setError(\"No countries available. Received empty or invalid data.\");\n        }\n      } catch (error) {\n        console.error('Error loading countries:', error);\n        setError(`Failed to load countries: ${error.message}`);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    loadCountries();\n  }, []);\n\n  // Load states when country is selected\n  useEffect(() => {\n    if (!selectedCountry) {\n      setStates([]);\n      return;\n    }\n    const loadStates = async () => {\n      try {\n        setIsLoading(true);\n        const encodedCountry = encodeURIComponent(selectedCountry);\n        const response = await fetch(`${API_ENDPOINTS.states}?country=${encodedCountry}`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch states');\n        }\n        const data = await response.json();\n        setStates(data);\n      } catch (error) {\n        console.error('Error loading states:', error);\n        setError('Failed to load states. Please try again later.');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    loadStates();\n  }, [selectedCountry]);\n\n  // Load businesses when country and state are selected\n  useEffect(() => {\n    if (!selectedCountry || !selectedState) {\n      setBusinesses([]);\n      return;\n    }\n    const loadBusinesses = async () => {\n      try {\n        setIsLoading(true);\n        setError(null);\n        const encodedTitle = encodeURIComponent(directoryType);\n        const encodedCountry = encodeURIComponent(selectedCountry);\n        const encodedState = encodeURIComponent(selectedState);\n\n        // Use the directoryBusinesses endpoint from the config\n        const apiUrl = `${API_ENDPOINTS.directoryBusinesses}?directory=${encodedTitle}&country=${encodedCountry}&state=${encodedState}`;\n        console.log(\"Fetching businesses from:\", apiUrl);\n        const response = await fetch(apiUrl);\n        if (!response.ok) {\n          const errorData = await response.text();\n          console.error(\"Businesses API error:\", errorData);\n          throw new Error(`Failed to fetch businesses: ${response.status} ${response.statusText}`);\n        }\n        const data = await response.json();\n        console.log(\"Businesses data:\", data);\n\n        // Check if the response is in the expected format\n        if (data.success && Array.isArray(data.businesses)) {\n          setBusinesses(data.businesses);\n        } else if (Array.isArray(data)) {\n          setBusinesses(data); // Fallback for direct array response\n        } else {\n          setBusinesses([]);\n          console.warn('Unexpected response format:', data);\n          if (data.error) {\n            setError(`Failed to load businesses: ${data.error}`);\n          } else {\n            setError('Received unexpected data format from server.');\n          }\n        }\n      } catch (error) {\n        console.error('Error loading businesses:', error);\n        setError(`Failed to load businesses: ${error.message}`);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    loadBusinesses();\n  }, [selectedCountry, selectedState, directoryType]);\n\n  // Clear all selections\n  const clearAll = () => {\n    setSelectedCountry('');\n    setSelectedState('');\n    setBusinesses([]);\n  };\n\n  // Debug location\n  const debugLocation = async () => {\n    if (!selectedCountry || !selectedState) {\n      alert('Please select both country and state first');\n      return;\n    }\n    try {\n      setIsLoading(true);\n      const response = await fetch(`/api/location-info/${encodeURIComponent(selectedCountry)}/${encodeURIComponent(selectedState)}`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch location info');\n      }\n      const data = await response.json();\n      let message = `Location: ${selectedCountry}, ${selectedState}\\n`;\n      message += `Total businesses: ${data.total_businesses}\\n\\n`;\n      message += 'Business types available in this location:\\n';\n      for (const [type, count] of Object.entries(data.business_types)) {\n        message += `- ${type}: ${count} businesses\\n`;\n      }\n      alert(message);\n    } catch (error) {\n      console.error('Error checking location:', error);\n      alert('Failed to check location data');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"sidebar\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        alt: \"Oatmeal AI Logo\",\n        className: \"sidebar-logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Oatmeal AI\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            children: \"Home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/chat\",\n            children: \"Chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: getHeaderImage(),\n          alt: `${title}`,\n          className: \"header-image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Country\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedCountry,\n            onChange: e => setSelectedCountry(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select Country\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this), countries.map((country, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: country,\n              children: country\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"State\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedState,\n            onChange: e => setSelectedState(e.target.value),\n            disabled: !selectedCountry,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select State\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this), states.map((state, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: state,\n              children: state\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"clear-btn\",\n          onClick: clearAll,\n          children: \"Clear all\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"debug-btn\",\n          onClick: debugLocation,\n          children: \"Debug Location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"candidates\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"Result: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            id: \"resultCount\",\n            children: businesses.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 23\n          }, this), \" Businesses\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"business-list\",\n          children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 15\n          }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this) : businesses.length === 0 && selectedCountry && selectedState ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            children: \"No businesses found for this location. Please try a different selection.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 15\n          }, this) : businesses.map((business, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"candidate\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"candidate-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: business.business_name || business.name || (typeof business === 'string' ? business : 'Unnamed Business')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 21\n              }, this), business.description && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"business-description\",\n                children: business.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 46\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"business-contact-info\",\n                children: [business.address && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"business-address\",\n                  children: business.address\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 44\n                }, this), business.city && business.state && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"business-location\",\n                  children: [business.city, \", \", business.state, \" \", business.zip_code && business.zip_code]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 25\n                }, this), business.phone && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"business-phone\",\n                  children: [\"Phone: \", business.phone]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 42\n                }, this), business.email && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"business-email\",\n                  children: [\"Email: \", business.email]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 42\n                }, this), business.website && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"business-website\",\n                  children: [\"Website: \", /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: business.website.startsWith('http') ? business.website : `https://${business.website}`,\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    children: business.website\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 332,\n                    columnNumber: 85\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 44\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"candidate-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"open-btn\",\n                onClick: () => {\n                  const businessId = business.business_id || index;\n                  window.open(`/business/${businessId}`, '_blank');\n                },\n                children: \"Open\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"detail-btn\",\n                children: \"Detail\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 19\n            }, this)]\n          }, business.business_id || index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 251,\n    columnNumber: 5\n  }, this);\n}\n_s(DirectoryDetail, \"RrKg9gt0a5GxS0SyuRLbhvMe070=\", false, function () {\n  return [useParams];\n});\n_c = DirectoryDetail;\nexport default DirectoryDetail;\nvar _c;\n$RefreshReg$(_c, \"DirectoryDetail\");","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","logo","API_ENDPOINTS","agriAssociaImg","artisianImg","brImg","crafOrgImg","farmersMarketImg","farmsRanchesImg","fiberImg","fiberMillsImg","fisheriesImg","fishermenImg","foodCopImg","foodHubImg","groceryStoreImg","manfacImg","marinasImg","meatImg","realEstateImg","restaurantsImg","retailersImg","serviceProvidersImg","universitiesImg","vetImg","vineyardsImg","wineriesImg","othersImg","jsxDEV","_jsxDEV","DirectoryDetail","_s","directoryType","countries","setCountries","states","setStates","businesses","setBusinesses","selectedCountry","setSelectedCountry","selectedState","setSelectedState","isLoading","setIsLoading","error","setError","formatTitle","slug","split","map","word","charAt","toUpperCase","slice","join","title","directoryImages","getHeaderImage","loadCountries","console","log","response","fetch","ok","errorData","text","Error","status","statusText","data","json","Array","isArray","length","warn","message","loadStates","encodedCountry","encodeURIComponent","loadBusinesses","encodedTitle","encodedState","apiUrl","directoryBusinesses","success","clearAll","debugLocation","alert","total_businesses","type","count","Object","entries","business_types","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","to","value","onChange","e","target","country","index","disabled","state","onClick","id","business","business_name","name","description","address","city","zip_code","phone","email","website","href","startsWith","rel","businessId","business_id","window","open","_c","$RefreshReg$"],"sources":["C:/Users/STSC/Downloads/Agent-Backend-main (3)/my-app/src/pages/DirectoryDetail.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport '../styles/DirectoryDetail.css';\r\nimport logo from '../images/OatmealaLogoi (1).png';\r\nimport { API_ENDPOINTS } from '../config';\r\n\r\n// Import images with the correct file extensions\r\nimport agriAssociaImg from '../images/agri_associa.png';\r\nimport artisianImg from '../images/artisian.jpg';\r\nimport brImg from '../images/br.jpg';\r\nimport crafOrgImg from '../images/craf_org.jpg';\r\nimport farmersMarketImg from '../images/farmers_market.jpg';\r\nimport farmsRanchesImg from '../images/farms_ranches.jpg';\r\nimport fiberImg from '../images/fiber.jpg';\r\nimport fiberMillsImg from '../images/fiber_mills.jpg';\r\nimport fisheriesImg from '../images/fisheries.jpeg';\r\nimport fishermenImg from '../images/fishermen.jpeg';\r\nimport foodCopImg from '../images/food_cop.jpg';\r\nimport foodHubImg from '../images/food_hub.jpg';\r\nimport groceryStoreImg from '../images/grocery_store.jpeg';\r\nimport manfacImg from '../images/manfac.jpeg';\r\nimport marinasImg from '../images/marinas.jpeg';\r\nimport meatImg from '../images/meat.jpg';\r\nimport realEstateImg from '../images/real_estate.webp';\r\nimport restaurantsImg from '../images/restaurants.jpg';\r\nimport retailersImg from '../images/retailers.png';\r\nimport serviceProvidersImg from '../images/service_providers.webp';\r\nimport universitiesImg from '../images/universities.jpeg';\r\nimport vetImg from '../images/vet.webp';\r\nimport vineyardsImg from '../images/vineyards.jpeg';\r\nimport wineriesImg from '../images/wineries.png';\r\nimport othersImg from '../images/others.jpg';\r\n\r\nfunction DirectoryDetail() {\r\n  const { directoryType } = useParams();\r\n  const [countries, setCountries] = useState([]);\r\n  const [states, setStates] = useState([]);\r\n  const [businesses, setBusinesses] = useState([]);\r\n  const [selectedCountry, setSelectedCountry] = useState('');\r\n  const [selectedState, setSelectedState] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Format the directory type for display (convert path slugs to title)\r\n  const formatTitle = (slug) => {\r\n    if (!slug) return '';\r\n    return slug.split('-')\r\n      .map(word => word.charAt(0).toUpperCase() + word.slice(1))\r\n      .join(' ');\r\n  };\r\n\r\n  const title = formatTitle(directoryType);\r\n\r\n  // Map of directory type slugs to their corresponding images\r\n  const directoryImages = {\r\n    'agricultural-associations': agriAssociaImg,\r\n    'artisan-producers': artisianImg,\r\n    'business-resources': brImg,\r\n    'crafter-organizations': crafOrgImg,\r\n    'farmers-markets': farmersMarketImg,\r\n    'farms-ranches': farmsRanchesImg,\r\n    'fiber-cooperatives': fiberImg,\r\n    'fiber-mills': fiberMillsImg,\r\n    'fisheries': fisheriesImg,\r\n    'fishermen': fishermenImg,\r\n    'food-cooperatives': foodCopImg,\r\n    'food-hubs': foodHubImg,\r\n    'grocery-stores': groceryStoreImg,\r\n    'manufacturers': manfacImg,\r\n    'marinas': marinasImg,\r\n    'meat-wholesalers': meatImg,\r\n    'real-estate-agents': realEstateImg,\r\n    'restaurants': restaurantsImg,\r\n    'retailers': retailersImg,\r\n    'service-providers': serviceProvidersImg,\r\n    'universities': universitiesImg,\r\n    'veterinarians': vetImg,\r\n    'vineyards': vineyardsImg,\r\n    'wineries': wineriesImg,\r\n    'others': othersImg\r\n  };\r\n\r\n  // Get the correct image for the current directory type\r\n  const getHeaderImage = () => {\r\n    return directoryImages[directoryType] || othersImg; // Default to \"others\" if not found\r\n  };\r\n\r\n  // Load countries from API\r\n  useEffect(() => {\r\n    const loadCountries = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        setError(null);\r\n        \r\n        console.log(\"Fetching countries from:\", API_ENDPOINTS.countries);\r\n        const response = await fetch(API_ENDPOINTS.countries);\r\n        \r\n        if (!response.ok) {\r\n          const errorData = await response.text();\r\n          console.error(\"Countries API error:\", errorData);\r\n          throw new Error(`Failed to fetch countries: ${response.status} ${response.statusText}`);\r\n        }\r\n        \r\n        const data = await response.json();\r\n        console.log(\"Countries data:\", data);\r\n        \r\n        if (Array.isArray(data) && data.length > 0) {\r\n          setCountries(data);\r\n        } else {\r\n          console.warn(\"Empty or invalid countries data:\", data);\r\n          setError(\"No countries available. Received empty or invalid data.\");\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading countries:', error);\r\n        setError(`Failed to load countries: ${error.message}`);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    loadCountries();\r\n  }, []);\r\n\r\n  // Load states when country is selected\r\n  useEffect(() => {\r\n    if (!selectedCountry) {\r\n      setStates([]);\r\n      return;\r\n    }\r\n\r\n    const loadStates = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        const encodedCountry = encodeURIComponent(selectedCountry);\r\n        \r\n        const response = await fetch(`${API_ENDPOINTS.states}?country=${encodedCountry}`);\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch states');\r\n        }\r\n        \r\n        const data = await response.json();\r\n        setStates(data);\r\n      } catch (error) {\r\n        console.error('Error loading states:', error);\r\n        setError('Failed to load states. Please try again later.');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    loadStates();\r\n  }, [selectedCountry]);\r\n\r\n  // Load businesses when country and state are selected\r\n  useEffect(() => {\r\n    if (!selectedCountry || !selectedState) {\r\n      setBusinesses([]);\r\n      return;\r\n    }\r\n\r\n    const loadBusinesses = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        setError(null);\r\n        \r\n        const encodedTitle = encodeURIComponent(directoryType);\r\n        const encodedCountry = encodeURIComponent(selectedCountry);\r\n        const encodedState = encodeURIComponent(selectedState);\r\n        \r\n        // Use the directoryBusinesses endpoint from the config\r\n        const apiUrl = `${API_ENDPOINTS.directoryBusinesses}?directory=${encodedTitle}&country=${encodedCountry}&state=${encodedState}`;\r\n        console.log(\"Fetching businesses from:\", apiUrl);\r\n        \r\n        const response = await fetch(apiUrl);\r\n        \r\n        if (!response.ok) {\r\n          const errorData = await response.text();\r\n          console.error(\"Businesses API error:\", errorData);\r\n          throw new Error(`Failed to fetch businesses: ${response.status} ${response.statusText}`);\r\n        }\r\n        \r\n        const data = await response.json();\r\n        console.log(\"Businesses data:\", data);\r\n        \r\n        // Check if the response is in the expected format\r\n        if (data.success && Array.isArray(data.businesses)) {\r\n          setBusinesses(data.businesses);\r\n        } else if (Array.isArray(data)) {\r\n          setBusinesses(data); // Fallback for direct array response\r\n        } else {\r\n          setBusinesses([]);\r\n          console.warn('Unexpected response format:', data);\r\n          if (data.error) {\r\n            setError(`Failed to load businesses: ${data.error}`);\r\n          } else {\r\n            setError('Received unexpected data format from server.');\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading businesses:', error);\r\n        setError(`Failed to load businesses: ${error.message}`);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    loadBusinesses();\r\n  }, [selectedCountry, selectedState, directoryType]);\r\n\r\n  // Clear all selections\r\n  const clearAll = () => {\r\n    setSelectedCountry('');\r\n    setSelectedState('');\r\n    setBusinesses([]);\r\n  };\r\n\r\n  // Debug location\r\n  const debugLocation = async () => {\r\n    if (!selectedCountry || !selectedState) {\r\n      alert('Please select both country and state first');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      const response = await fetch(`/api/location-info/${encodeURIComponent(selectedCountry)}/${encodeURIComponent(selectedState)}`);\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch location info');\r\n      }\r\n      \r\n      const data = await response.json();\r\n      \r\n      let message = `Location: ${selectedCountry}, ${selectedState}\\n`;\r\n      message += `Total businesses: ${data.total_businesses}\\n\\n`;\r\n      message += 'Business types available in this location:\\n';\r\n      \r\n      for (const [type, count] of Object.entries(data.business_types)) {\r\n        message += `- ${type}: ${count} businesses\\n`;\r\n      }\r\n      \r\n      alert(message);\r\n    } catch (error) {\r\n      console.error('Error checking location:', error);\r\n      alert('Failed to check location data');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <nav className=\"sidebar\">\r\n        <img src={logo} alt=\"Oatmeal AI Logo\" className=\"sidebar-logo\" />\r\n        <h2>Oatmeal AI</h2>\r\n        <ul>\r\n          <li><Link to=\"/\">Home</Link></li>\r\n          <li><Link to=\"/chat\">Chat</Link></li>\r\n        </ul>\r\n      </nav>\r\n      \r\n      <main>\r\n        <header>\r\n          <img \r\n            src={getHeaderImage()} \r\n            alt={`${title}`} \r\n            className=\"header-image\" \r\n          />\r\n          <h1>{title}</h1>\r\n        </header>\r\n        \r\n        <div className=\"filter-section\">\r\n          <div className=\"filter-group\">\r\n            <label>Country</label>\r\n            <select \r\n              value={selectedCountry}\r\n              onChange={(e) => setSelectedCountry(e.target.value)}\r\n            >\r\n              <option value=\"\">Select Country</option>\r\n              {countries.map((country, index) => (\r\n                <option key={index} value={country}>{country}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          \r\n          <div className=\"filter-group\">\r\n            <label>State</label>\r\n            <select \r\n              value={selectedState}\r\n              onChange={(e) => setSelectedState(e.target.value)}\r\n              disabled={!selectedCountry}\r\n            >\r\n              <option value=\"\">Select State</option>\r\n              {states.map((state, index) => (\r\n                <option key={index} value={state}>{state}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          \r\n          <button className=\"clear-btn\" onClick={clearAll}>Clear all</button>\r\n          <button \r\n            className=\"debug-btn\" \r\n            onClick={debugLocation}\r\n          >\r\n            Debug Location\r\n          </button>\r\n        </div>\r\n        \r\n        <section className=\"candidates\">\r\n          <h2>Result: <span id=\"resultCount\">{businesses.length}</span> Businesses</h2>\r\n          <div id=\"business-list\">\r\n            {isLoading ? (\r\n              <div className=\"loading\">Loading...</div>\r\n            ) : error ? (\r\n              <div className=\"error-message\">{error}</div>\r\n            ) : businesses.length === 0 && (selectedCountry && selectedState) ? (\r\n              <div className=\"error-message\">No businesses found for this location. Please try a different selection.</div>\r\n            ) : (\r\n              businesses.map((business, index) => (\r\n                <div className=\"candidate\" key={business.business_id || index}>\r\n                  <div className=\"candidate-info\">\r\n                    <h3>{business.business_name || business.name || (typeof business === 'string' ? business : 'Unnamed Business')}</h3>\r\n                    {business.description && <p className=\"business-description\">{business.description}</p>}\r\n                    <div className=\"business-contact-info\">\r\n                      {business.address && <p className=\"business-address\">{business.address}</p>}\r\n                      {business.city && business.state && (\r\n                        <p className=\"business-location\">\r\n                          {business.city}, {business.state} {business.zip_code && business.zip_code}\r\n                        </p>\r\n                      )}\r\n                      {business.phone && <p className=\"business-phone\">Phone: {business.phone}</p>}\r\n                      {business.email && <p className=\"business-email\">Email: {business.email}</p>}\r\n                      {business.website && <p className=\"business-website\">Website: <a href={business.website.startsWith('http') ? business.website : `https://${business.website}`} target=\"_blank\" rel=\"noopener noreferrer\">{business.website}</a></p>}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"candidate-actions\">\r\n                    <button \r\n                      className=\"open-btn\" \r\n                      onClick={() => {\r\n                        const businessId = business.business_id || index;\r\n                        window.open(`/business/${businessId}`, '_blank');\r\n                      }}\r\n                    >\r\n                      Open\r\n                    </button>\r\n                    <button className=\"detail-btn\">Detail</button>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </section>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DirectoryDetail; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}